{% extends "base.html" %}

{% block content %}
<div class="jumbotron">
  <h1 class="display-4">Chatty</h1>
  <p class="lead">Use this page to find help</p>
  <hr class="my-4">
  <p>To chat, just type a message and send.</p>
  <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#expenseModal">
    Help
  </button>
</div>
<div>
  <div class="row">
      <div class="col-sm-6 offset-sm-3">
          <div id="chatbox" class="card text-center">
              <div class="card-body">
                  <p class="botText card-text bg-light"><span>Hi! I'm Chatterbot</span></p>
              </div> 
          </div>
          <div id="chatbox" class=" form-row align-items-center">
              <div class="card-body col-auto my-1">
                  <div id="userInput" class="input-group">
                      <input id="textInput" class="form-control" type="text" name="msg" placeholder="Type Your Message Here">
                      <input id="buttonInput" class="btn btn-success form-control" type="submit" value="Send">
                  </div>
              </div> 
          </div>
      </div>
  </div>
<script>
  function getResponse() {
      let userText = $("#textInput").val();
      let userHtml = '<p class="userText"><span>' + userText + '</span></p>';
      $("#textInput").val("");
      $("#chatbox").append(userHtml);
      document.getElementById('userInput').scrollIntoView({block: 'start', behavior: 'smooth'});
      $.get("/getresponse", { msg: userText }).done(function(data) {
      var botHtml = '<p class="botText bg-info rounded"><span>' + data + '</span></p>';
      $("#chatbox").append(botHtml);
      document.getElementById('userInput').scrollIntoView({block: 'start', behavior: 'smooth'});
});
}
  $("#textInput").keypress(function(e) {
  //if enter key is pressed
      if(e.which == 13) {
          getResponse();
      }
  });
  $("#buttonInput").click(function() {
      getResponse();
  });
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</div>

{% endblock %}